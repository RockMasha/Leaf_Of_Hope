import{s,a as c,b as i}from"./api-CFRoDk5d.js";function l(){const e=localStorage.getItem("token");return e?`Bearer ${e}`:""}const o=document.querySelector(".modal-wrapper");function d(e){localStorage.setItem("token",`${e}`),s(e)}function u(e){let t=new FormData(e);const r={};for(let n of t.entries())r[n[0]]=n[1];return r}function f(){o.classList.add("is-hidden"),body.removeAttribute("lock","")}async function m(e){e.preventDefault();const t=o.querySelector("form"),r=u(t);try{const n=await c(r);d(n.token),f()}catch(n){console.log(n);const a=o.querySelector(".signin-modal__error");a.textContent="неправельний логін чи пароль"}}function g(){o.classList.remove("is-hidden"),document.body.setAttribute("lock",""),o.addEventListener("submit",m)}async function k(){const e=l();e||g();try{return await i(e)}catch(t){return console.log(t),!1}}export{l as g,k as i,g as s};
