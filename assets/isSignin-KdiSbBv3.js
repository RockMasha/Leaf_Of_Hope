import{s,a as i}from"./api-DlRZ584a.js";import{c}from"./createToken-lOYpR9PI.js";function l(){const e=localStorage.getItem("token");return e?`Bearer ${e}`:""}const n=document.querySelector(".modal-wrapper");function d(e){let t=new FormData(e);const r={};for(let o of t.entries())r[o[0]]=o[1];return r}function u(){n.classList.add("is-hidden"),body.removeAttribute("lock","")}async function m(e){e.preventDefault();const t=n.querySelector("form"),r=d(t);try{const o=await s(r);c(o.token),u()}catch(o){console.log(o);const a=n.querySelector(".signin-modal__error");a.textContent="неправельний логін чи пароль"}}function f(){n.classList.remove("is-hidden"),document.body.setAttribute("lock",""),n.addEventListener("submit",m)}async function k(){const e=l();e||f();try{return await i(e)}catch(t){return console.log(t),!1}}export{l as g,k as i,f as s};
