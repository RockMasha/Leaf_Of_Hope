import{h as w}from"./hiddenContentLoader-CntVco9S.js";import{b as S,c as _,e as L,p as E}from"./api-CiyxzFpA.js";import{g as n}from"./getValueSrcParams-BMgebK2A.js";import{c as F,s as q}from"./showPhoto-DbG4j3_m.js";import{s as A,r as D}from"./setInProgressLoader-BAB2lVXe.js";import{i as k}from"./isSignin-UVjQfqG-.js";const t={form:document.querySelector(".form-advert"),photo:document.querySelector(".form-advert__img"),way:document.querySelector(".form-advert-way"),wishField:document.querySelector(".form-advert__wish"),btnSubmit:document.querySelector(".form-advert__btn-submit"),error:document.querySelector(".formAdvert__error")};function I(o){const e=o.target;if(e.classList.contains("form-advert-way__input")){if(console.log(e),e.classList.contains("form-advert-way__input_give")){P();return}C()}}function P(){t.wishField.classList.add("is-hidden")}function C(){t.wishField.classList.remove("is-hidden")}async function W(){const{alergenicity:o,humidity:e,lifeDuration:r,light:i,name:l,size:v,temperature:h,way:g,wish:y,description:p}=t.form,a={alergenicity:o,humidity:e,lifeDuration:r,light:i,name:l,size:v,temperature:h,way:g,wish:y,description:p},b=n("id"),d=await S(b);for(const m in a){const u=`${d[m]}`;a[m].value=u!=="undefined"?u:""}const c=document.querySelector(".form-advert__svg");c.src=d.image,c.classList.add("big-photo")}async function x(){await W(),t.btnSubmit.textContent="Зберегти"}async function s(o){o.preventDefault(),R(),A();try{const e=F(t.form),r=n("id");if(r)await _(r,e);else{const i=L();await E(e,i)}history.go(-1)}catch(e){console.log(e),z(),t.error.textContent="Неравельно ввід"}finally{D()}}async function R(){t.form.addEventListener("submit",f),t.form.removeEventListener("submit",s)}function z(){t.form.removeEventListener("submit",f),t.form.addEventListener("submit",s)}function f(o){o.preventDefault()}const O=n("id");O?await x():k();t.way.addEventListener("click",I);t.photo.onchange=q.bind(void 0,t.photo);t.form.addEventListener("submit",s);w();
