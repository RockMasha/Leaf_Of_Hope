var B=(s,t,i)=>{if(!t.has(s))throw TypeError("Cannot "+i)};var n=(s,t,i)=>(B(s,t,"read from private field"),i?i.call(s):t.get(s)),e=(s,t,i)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,i)},d=(s,t,i,h)=>(B(s,t,"write to private field"),h?h.call(s,i):t.set(s,i),i);var a=(s,t,i)=>(B(s,t,"access private method"),i);import{h as O}from"./hiddenContentLoader-BTbEcCAy.js";/* empty css              */import{c as Q}from"./createFormData-CqlKbpTV.js";import{g as R}from"./api-gcbuf7mz.js";import{g as U}from"./getAdvertCardInner-B_bPg60f.js";const o={form:document.querySelector(".side-panel__form"),leftSide:document.querySelector(".left-side"),openModalBtn:document.querySelector("#open-modal-js"),closeModalBtn:document.querySelector("#close-modal-js"),modal:document.querySelector("#modal-js")},V=()=>{window.scrollTo({top:0,left:0}),document.body.style.overflow="hidden",o.modal.classList.remove("is-hidden")},N=()=>{document.body.style.overflow="auto",o.modal.classList.add("is-hidden")},A=()=>{const s=window.matchMedia("(min-width: 768px)").matches;s&&o.modal.classList.contains("is-hidden")?o.modal.classList.remove("is-hidden"):!s&&!o.modal.classList.contains("is-hidden")&&N()};function W(s){return`
      <li class="left-side__item item-card">
        ${U(s)}
      </li>
    `}var l,g,p,m,u,f,r,c,L,F,v,j,w,I,_,$,C,T,y,D,b,H,k,z,P,G,x,J,S,K;class X{constructor(t){e(this,r);e(this,L);e(this,v);e(this,w);e(this,_);e(this,C);e(this,y);e(this,b);e(this,k);e(this,P);e(this,x);e(this,S);e(this,l,void 0);e(this,g,void 0);e(this,p,void 0);e(this,m,void 0);e(this,u,void 0);e(this,f,void 0);this.fatherElement=t,this.listCardsEl=t.querySelector(".cards-list"),this.paginationEl=t.querySelector(".pagination"),this.paginationListEl=t.querySelector(".pagination__numb"),this.backEl=t.querySelector(".pagination-arrow_back"),this.nextEl=t.querySelector(".pagination-arrow_next"),this.firstEL=t.querySelector(".pagination-arrow_first"),this.lastEL=t.querySelector(".pagination-arrow_last"),this.params,this.page=1,this.maxAdvertInPage=10,this.max_page}async showFirstCard(t){a(this,r,c).call(this,t),this.params=t,this.paginationEl.classList.remove("is-hidden")}async showNextCards(){this.page>=this.max_page||(a(this,w,I).call(this),a(this,r,c).call(this))}async showBackCards(){this.page<=1||(a(this,_,$).call(this),a(this,r,c).call(this))}async showFirstCards(){this.page<=1||(a(this,C,T).call(this),a(this,r,c).call(this))}async showLastCards(){this.page!==this.max_page&&(a(this,y,D).call(this),a(this,r,c).call(this))}async showSpecifiedCards(t){const i=t.target;if(!i.matches(".pagination__btn")&&!i.matches(".pagination__item"))return;const E=i.closest(".pagination__item"),q=Number(E.dataset.page);a(this,v,j).call(this,q),a(this,r,c).call(this)}setPagination(){a(this,P,G).call(this),a(this,k,z).call(this),this.nextEl.addEventListener("click",n(this,l)),this.backEl.addEventListener("click",n(this,g)),this.paginationListEl.addEventListener("click",n(this,p)),this.firstEL.addEventListener("click",n(this,m)),this.lastEL.addEventListener("click",n(this,u))}disablePagination(){this.nextEl.removeEventListener("click",n(this,l)),this.backEl.removeEventListener("click",n(this,g)),this.paginationListEl.removeEventListener("click",n(this,p)),this.firstEL.removeEventListener("click",n(this,m)),this.lastEL.removeEventListener("click",n(this,u))}}l=new WeakMap,g=new WeakMap,p=new WeakMap,m=new WeakMap,u=new WeakMap,f=new WeakMap,r=new WeakSet,c=async function(t=this.params){this.disablePagination(),await a(this,L,F).call(this,t,this.page),this.setPagination()},L=new WeakSet,F=async function(t){const i=await R(t,this.page);a(this,b,H).call(this,i.tottal);const E=i.result.map(q=>W(q));this.listCardsEl.innerHTML=E.join("")},v=new WeakSet,j=function(t){this.page=t},w=new WeakSet,I=function(){this.page+=1},_=new WeakSet,$=function(){this.page-=1},C=new WeakSet,T=function(){this.page=1},y=new WeakSet,D=function(){this.page=this.max_page},b=new WeakSet,H=function(t){this.max_page=Math.ceil(t/this.maxAdvertInPage)},k=new WeakSet,z=function(){d(this,g,this.showBackCards.bind(this)),d(this,l,this.showNextCards.bind(this)),d(this,p,this.showSpecifiedCards.bind(this)),d(this,f,this.setPagination.bind(this)),d(this,m,this.showFirstCards.bind(this)),d(this,u,this.showLastCards.bind(this))},P=new WeakSet,G=function(){const t=a(this,x,J).call(this);this.paginationListEl.innerHTML=t,a(this,S,K).call(this)},x=new WeakSet,J=function(){let t="";if(this.max_page>=3){let i=-1;this.page===1?i=0:this.page===this.max_page&&(i=-2);for(let h=1;h<=3;h++){const E=i+this.page;t+=M(E),i++}}else for(let i=1;i<=this.max_page;i++)t+=M(i);return t},S=new WeakSet,K=function(){document.querySelector(`.pagination__item[data-page="${this.page}"]`).setAttribute("active","")};function M(s){return`<li class="pagination__item" data-page="${s}">
            <button class="pagination__btn">${s}</button>
          </li>`}async function Y(s){s.preventDefault();const t=Q(o.form);new X(o.leftSide).showFirstCard(t)}A();window.addEventListener("resize",A);o.openModalBtn.addEventListener("click",V);o.closeModalBtn.addEventListener("click",N);o.form.addEventListener("submit",Y);O();
