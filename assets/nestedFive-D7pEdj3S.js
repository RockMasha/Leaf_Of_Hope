import{h as S}from"./hiddenContentLoader-DnNAx6HY.js";import{b as L,c as w,e as _,p as A}from"./api-CiyxzFpA.js";import{g as i}from"./getValueSrcParams-BMgebK2A.js";import{c as E,s as q}from"./showPhoto-DbG4j3_m.js";import{s as D,r as F}from"./setInProgressLoader-BAB2lVXe.js";import{i as I}from"./isSignin-UVjQfqG-.js";const t={form:document.querySelector(".form-advert"),photo:document.querySelector(".form-advert__img"),btnSubmit:document.querySelector(".form-advert__btn-submit"),error:document.querySelector(".formAdvert__error")};async function P(){const{alergenicity:o,humidity:e,lifeDuration:r,light:n,name:l,size:v,temperature:b,way:p,wish:g,description:h}=t.form,s={alergenicity:o,humidity:e,lifeDuration:r,light:n,name:l,size:v,temperature:b,way:p,wish:g,description:h},y=i("id"),m=await L(y);for(const d in s){const u=`${m[d]}`;s[d].value=u!=="undefined"?u:""}const c=document.querySelector(".form-advert__svg");c.src=m.image,c.classList.add("big-photo")}async function C(){await P(),t.btnSubmit.textContent="Зберегти"}async function a(o){o.preventDefault(),k(),D();try{const e=E(t.form),r=i("id");if(r)await w(r,e);else{const n=_();await A(e,n)}history.go(-1)}catch(e){console.log(e),x(),t.error.textContent="Неравельно ввід"}finally{F()}}async function k(){t.form.addEventListener("submit",f),t.form.removeEventListener("submit",a)}function x(){t.form.removeEventListener("submit",f),t.form.addEventListener("submit",a)}function f(o){o.preventDefault()}const z=i("id");z?await C():I();t.photo.onchange=q.bind(void 0,t.photo);t.form.addEventListener("submit",a);S();
