import{s as a,b as c}from"./api-BqoOazn-.js";import{c as i}from"./createToken-BZzyubv1.js";function l(){const e=localStorage.getItem("token");return e?`Bearer ${e}`:""}const n=document.querySelector(".modal-wrapper");function d(e){let t=new FormData(e);const r={};for(let o of t.entries())r[o[0]]=o[1];return r}function u(){n.classList.add("is-hidden"),document.body.removeAttribute("lock","")}async function m(e){e.preventDefault();const t=n.querySelector("form"),r=d(t);try{const o=await a(r);i(o.token),u()}catch(o){console.log(o);const s=n.querySelector(".signin-modal__error");s.textContent="неправельний логін чи пароль"}}function f(){n.classList.remove("is-hidden"),document.body.setAttribute("lock",""),n.addEventListener("submit",m)}async function k(){const e=l();e||f();try{return await c(e)}catch(t){return console.log(t),!1}}export{l as g,k as i,f as s};
